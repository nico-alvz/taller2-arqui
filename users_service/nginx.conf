 # nginx.conf
- daemon off;
 worker_processes auto;
 error_log /dev/stderr debug;

 events { worker_connections 1024; }

 http {
   access_log /dev/stdout main;
   error_log  /dev/stderr debug;

   server {
     listen 10000 http2;

     # Health-check para Render
     location = /healthz {
       add_header Content-Type text/plain;
       return 200 'OK - Render health check';
     }

     # gRPC proxy
     location / {
       grpc_pass grpc://127.0.0.1:50052;
       error_page 502 = /error502grpc;
     }

     # Traducci√≥n de errores de proxy a gRPC status
     location = /error502grpc {
       internal;
       default_type application/grpc;
       add_header grpc-status 14;
       add_header content-length 0;
       return 204;
     }
   }
 }
